{% load static %}
{% load sas_tags %}

<script type="text/javascript" src="{% static 'student_assistance_system/js/requirements.js' %}"></script>

<h1>Requirements</h1>
<div id="requirement_sets">
{% for req_set in req_sets %}
<div class="requirement_set">
    <h2>{{ req_set.type_name }}: {{ req_set.name }}</h2>
    <hr />
    {% for req in req_set.requirements.all %}
    <div class="requirement">
        {% get_course_statuses req user schedule as course_statuses %}
        {% fulfillment_status req course_statuses as req_status %}
        <a href="#" onclick="showHideDiv('course_table_{{ forloop.parentloop.counter }}_{{ forloop.counter }}')">{{ req.name }}: {% long_status req_status %}</a>
        <div id="course_table_{{ forloop.parentloop.counter }}_{{ forloop.counter }}" class="course_table">
            <table>
                <tr>
                    <th>Course</th>
                    <th style="width: 5em; text-align: center;">Status</th>
                </tr>
                {% with course_statuses.items as course_status_pairs %}
                {% for course, status in course_status_pairs %}
                {# {% if course_status_pairs|length < 10 or status != 'U' %} #}
                <tr>
                    <td>{{ course }}</td>
                    {% if status == 'U' %}
                    <td class="unfulfilled" title="{% long_status status %}"></td>
                    {% elif status == 'S' %}
                    <td class="schedule_fulfills" title="{% long_status status %}"></td>
                    {% elif status == 'F' %}
                    <td class="fulfilled" title="{% long_status status %}"></td>
                    {% endif %}
                </tr>
                {# {% endif %} #}
                {% endfor %}
                {% endwith %}
            </table>
        </div>
    </div>
    {% endfor %}
</div>
{% endfor %}
</div>
