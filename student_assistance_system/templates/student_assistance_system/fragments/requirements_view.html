{% load static %}
{% load sas_tags %}

<script type="text/javascript" src="{% static 'student_assistance_system/js/requirements.js' %}"></script>

<h1>Requirements</h1>
<div id="requirement_sets">
{% for req_set in req_sets %}
<div class="requirement_set">
    <h2>{{ req_set.type_name }}: {{ req_set.name }}</h2>
    <hr />
    {% for req in req_set.requirements.all %}
    <div class="requirement">
        {% get_course_statuses req user schedule as course_statuses %}
        {% fulfillment_status req course_statuses as req_status %}
        <a href="#" onclick="showHideDiv('course_table{{ forloop.counter }}')">{{ req.name }}: {{ req_status }}</a>
        <div id="course_table{{ forloop.counter }}" style="display: none">
            <table>
                <tr>
                    <th>Course</th>
                    <th>Status</th>
                </tr>
                {% for course, status in course_statuses.items %}
                <tr>
                    <td>{{ course }}</td>
                    {% if status == 'U' %}
                    <td class="unfulfilled" title="Unfulfilled" />
                    {% elif status == 'S' %}
                    <td class="schedule_fulfills" title="Fulfilled by schedule" />
                    {% elif status == 'F' %}
                    <td class="fulfilled" title="Fulfilled" />
                    {% endif %}
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
    {% endfor %}
</div>
{% endfor %}
</div>
